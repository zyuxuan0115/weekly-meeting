---
layout: post
title:  "2022-1-15 FuncMapTable & Reversed BAT are not enough!"
date:   2023-1-15 10:53:46 -0500
categories: cont-opt 
---
### Building FuncMapTable and reversed BAT in the Facebook BOLT
![before](/assets/2023-01-15/before.png)
![after](/assets/2023-01-15/after.png)

- In [RewriteInstance::preprocessProfileData()](https://github.com/upenn-acg/BOLT/blob/main/bolt/lib/Rewrite/RewriteInstance.cpp#L2616) 
    + the function calls [ProfileReader->setBAT(&*BAT);](https://github.com/upenn-acg/BOLT/blob/main/bolt/lib/Rewrite/RewriteInstance.cpp#L2629)
- In [BoltAddressTranslation.h]
    + there is a function called [translate()](https://github.com/upenn-acg/BOLT/blob/main/bolt/include/bolt/Profile/BoltAddressTranslation.h#L95)