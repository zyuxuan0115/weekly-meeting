---
layout: post
title:  "2023-9-27 Cloudlab"
date:   2023-9-27 1:53:46 -0500
categories: serverless functions
---
### Acquire cloudlab account and setup servers
- to get start -> [here](https://docs.cloudlab.us/getting-started.html)
	+ profile selected is m510
- the size of the root dir is too small.
	+ larger storage is at `/proj/zyuxuanssf-PG0` 
	+ ![here](/assets/2023-09-27/s1.png) 

### Build nightcore
- [github page](https://github.com/ut-osa/nightcore/tree/asplos-release) of nightcore
	+ `git clone --recurse-submodules git@github.com:ut-osa/nightcore.git`
	+ need to install 
		* [the newest version of cmake](https://cmake.org/download/)
		* [gcc-10](http://www.netgull.com/gcc/releases/gcc-10.1.0/)
			- `./configuration --prefix=/proj/zyuxuanssf-PG0/gcc-10`
			- after building gcc-10, `export CXX=/proj/zyuxuanssf-PG0/gcc-10`
	+ `./build_deps.sh`
	+ Before compilation, need to comment out `nightcore/src/common/stat.h`'s line #236 
	+ `make -j`	

### Run example of nightcore
- in `nightcore/examples/c`, when running `run_stack.sh`
	+ From `nightcore/examples/c/outputs/launcher_foo.log`, get an error msg:
		* `/usr/lib/x86_64-linux-gnu/libstdc++.so.6: version 'CXXABI_1.3.11' not found`
	+ to fix this problem
		```bash
		> sudo find / -name 'libstdc++.so.6'
		> export LD_LIBRARY_PATH="/proj/zyuxuanssf-PG0/gcc-10/lib64" 
		```

### About curl
- nightcore uses `curl -X POST -d "Hello" http://127.0.0.1:8080/function/Foo` 
	+ to run serverless function `Foo`
	+ `Foo` then calls `Bar`
- From `man curl`
	+ `curl` is a tool to transfer data from or to a server, using one of the supported protocols (DICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET and TFTP). The command is designed to work without user interaction. 

### Performance measurements
- In C example, I measured the execution time of local call
```

```
